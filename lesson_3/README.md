# EEG Alpha BCI Car Control

Выполняли: \
Ионко Кирилл Олегович \
Бирюков Михаил Алексеевич \
Доценко Елизавета Александровна \
Уваров Кирилл Константинович


Проект реализует **BCI (Brain–Computer Interface)** для управления машинкой на ESP32 по **альфа-ритму EEG (8–13 Гц)** в реальном времени.

Система:

* подключается к EEG-устройству через **CapsuleSDK**,
* фильтрует и анализирует сигнал,
* вычисляет мощность альфа-ритма,
* принимает решение о движении,
* отправляет команды на ESP32 по **UDP**,
* визуализирует EEG, PSD и состояние управления.

---

## Архитектура

```
EEG Device
   ↓
CapsuleSDK
   ↓
Real-time filtering (7–13 Hz)
   ↓
PSD + Alpha power (8–13 Hz)
   ↓
Threshold logic
   ↓
UDP → ESP32 (F/B)
```

---

## Основные возможности

* 4 канала EEG (настраивается)
* Реальное время (обновление ~100 мс)
* Альфа-ритм: 8–13 Гц
* Управление машинкой:

  * `F,100` — движение вперёд
  * `B,100` — движение назад
* Плавный bar-chart, показывающий **превышение порога**
* Калибровка перед стартом
* Визуализация:

  * временные ряды EEG
  * PSD по каналам
  * индикатор состояния управления

---

## Требования

### ПО

* Python ≥ 3.9
* CapsuleSDK (DLL / dylib)
* NumPy
* Matplotlib
* eeg_utils.py (в проекте)

### Железо

* EEG-устройство, поддерживаемое CapsuleSDK
* ESP32 с прошивкой, принимающей UDP-команды
* Общая сеть (PC ↔ ESP32)

---

## Конфигурация

Основные параметры в начале файла:

```python
CHANNELS = 4
EEG_WINDOW_SECONDS = 4.0

ALPHA_LOW = 8.0
ALPHA_HIGH = 13.0

THRESHOLD_ALPHA_POWER = 6.6e-11
ALPHA_MARGIN = 2.0e-11

BAR_SMOOTH = 0.1

ESP32_IP = "172.20.10.2"
UDP_PORT = 9999
```

### Пояснения

* `THRESHOLD_ALPHA_POWER` — порог включения движения
* `ALPHA_MARGIN` — диапазон, за который bar доходит до 100%
* `BAR_SMOOTH` — сглаживание bar-chart (EMA)
* `EEG_WINDOW_SECONDS` — длина окна анализа

---


## Управление машинкой

После калибровки:

```python
if alpha_power > THRESHOLD_ALPHA_POWER:
    send_to_esp32("F,100")
else:
    send_to_esp32("B,100")
```

Калибровка длится `CALIBRATION_DURATION` секунд и предотвращает ложный старт.

---

## Запуск

```bash
python main.py
```

1. Подключите EEG-устройство
2. Убедитесь, что ESP32 доступна по сети
3. Дождитесь завершения калибровки
4. Управляйте движением через альфа-ритм

Остановка — закрытие окна или `Ctrl+C`.

---

## Структура проекта

```
.
├── neurointerface.py          # основной скрипт
├── eeg_utils.py     # фильтры, PSD, RingBuffer
├── CapsuleSDK/      # SDK библиотеки
└── README.md
```

---




## Лицензия

Использование на свой риск.
Медицинского назначения **не имеет**.
